<!--jjw padding-0 style-->
<div class=" panel-body bg-light   padding-0 " id="temp_context" style="margin-top: -5px">
    <!-- templates 模版  -->
 
     <div class="input-group  col-sm-6    col-md-4  "  ng-show = "deviceModels.length > 15">
            <span class="input-group-btn">
                 <span class="btn btn-default height-30  "
                       translate="common.search"  >搜索</span>
            </span>
            <input class="form-control input-sm" type="text"   ng-model="f_n">
    </div>

 
    <div ng-repeat='dm in deviceModels | filter:{name: f_n } ' acroll-limit temp>

        <!--jjw border style-->
        <div class='row border temp-row panel-default' style="height: 40px;line-height: 2.5;border-radius: 2px;background-color: #F6F8F7;margin-top: 6px;box-shadow: 0 0 0 4px #f0f3f4;">
            <div class='  col-xs-10 ' ng-click=' loadPoints ( this , $event,  $index , dm  ) ; showp = !showp '>
                <!--<a ng-class="{ 'fa':true , 'fa-plus-square-o': !showp ,'fa-minus-square-o':showp  }"></a>-->
                <a style="display: inline-block;width: 10px" ng-class="{'fa':true ,'fa-angle-down': showp, 'fa-angle-right': !showp}"></a>
                <span style="font-weight: bold">{{dm.name }}</span>
                <!-- <i class="fa fa-spin fa-spinner "  ></i> -->
                <!-- dide  show   ng-show= " !showp "  -->
            </div>
            <div class='  col-xs-2 text-center'>
                <a ng-click='add_edit_t( this, dm )' class='text-link'>编辑</a>&nbsp;
                <a ng-click=' export_t( dm )' class='text-link' ng-if="false">导出</a>&nbsp;
                <a ng-click=' delTemp(   $index , dm )' class='text-link'>移除</a>
            </div>
        </div> 
        <!--jjw b-b b-l b-r style-->
        <div ng-show="showp " class="b-b b-l b-r panel-default" style="background-color: #F6F8F7;margin-top: -4px">
          
         <!--  <div class=' row b-b  temp-row hover-bg-info' style="height: 30px;line-height: 30px" ng-repeat=' p in points ' acroll-limit point> 
                <div class='  col-xs-2 col-sm-3    ' style="padding-left:40px;">

                    <i class='icon  icon-tag  '></i> {{p.name }}
                
                </div>
                <div class=' col-xs-8   col-sm-7   ' params="p.params"> 
                </div>
                <div class='  col-xs-2   col-sm-2  text-center'>
                    <a ng-click='addOrEditPoint( this ,p , $index  ,t  )' class='text-link'>编辑</a>&nbsp;
                    <a ng-click='add_f(p)' class='text-link' ng-if="false">   克隆</a>&nbsp;
                    <a ng-click='delPoint ( this ,$index , p  , dm.uuid  )' class='text-link'>移除</a>
                </div>

 
            </div>  -->

            <table  class="table table-striped table-hover b-b j_table" 
            ng-init="_$config =  $sys.point[dm.driver_id] ;  _$point = $sys.point ;">
                <thead>
                    <tr> 
                        <td>名称</td>
                        <td translate="params.poll"></td>
                        <td translate="params.is_packet"></td>  
                        <td ng-repeat=" th in  _$config.th " 
                            translate="params.{{th}}">  </td>  
                        <td> 操作 </td>
                    </tr>
                </thead>

                <tbody> 
                    <tr ng-repeat=' p in points '  ng-init="  pa =  fromJson(p.params); "  > 
                        <td>{{p.name}}</td>
                        <td>  {{ _$point.pointPoll[p.poll].k   }}   </td>
                        <td>  {{ _$point.packet[p.is_packet].k  }}  </td> 

                        <td ng-repeat=" th in  _$config.th "  > 
                           {{ _$config[th][pa[th]].k || pa[th] }}
                        </td> 
                        <td>
                            <a ng-click='addOrEditPoint( this ,p , $index  ,t  )' class='text-link'>编辑</a>&nbsp;
                            <a ng-click='add_f(p)' class='text-link' ng-if="false">   克隆</a>&nbsp;
                            <a ng-click='delPoint ( this ,$index , p  , dm.uuid  )' class='text-link'>移除</a>
             
                        </td>
                    </tr>

                </tbody>

            </table> 

            <div class='row   temp-row '>
                <!--jjw m-t-sm m-b-sm-->
                <div class='col-xs-12 m-t-sm m-b-sm'>
                    <!--jjw m-l-sm-->
                    <button class='btn btn-sm m-l-sm' ng-click='addOrEditPoint( this )'>添加点 </button>
                </div>
            </div>
        </div>
    </div>

    <!-- points 模版;  -->  
    <button class='btn btn-sm  btn-info m-t-sm m-b-sm' ng-click='add_edit_t( this  )'>
        添加设备模型
    </button>
    <!--  <button class='btn m-b-xs m-t-xs btn-sm btn-info'  ng-click='upload_t()' >上传模版</button>
 -->
</div>

